<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script>
        /*
        * 监听者模式：
        * 适用于两个对象之间的消息沟通。
        * */

        /*
        * 把gameScene改成一个监听者：
        * 1、维护一个听众队列，
        * 2、当游戏中有事件发生时( 小鸟死亡 )，
        * 3、告知所有的听众。
        * 这里一个听众可以理解为是一个回调，告知听众即执行回调。
        * */

        // 监听者
        var jianTingZhe = {
            // 听众列表
            listeners: [],
            // 小鸟死亡触发时，告知所有的听众
            triggerBirdOver: function() {
                this.listeners.forEach( function( listen ) {
                    listen();
                });
            }
        }

        jianTingZhe.listeners.push( function() {
            console.log( '小鸟死了，我就哭' );
        } );

        jianTingZhe.listeners.push( function() {
            console.log( '小鸟死了，我很伤心' );
        } );

        jianTingZhe.listeners.push( function() {
            console.log( '小鸟死了，我要埋葬它' );
        } );

        // 监听到小鸟死了
        jianTingZhe.triggerBirdOver();
    </script>
</body>
</html>